<section class="page-header">
  <h1>Admin · Orders</h1>
  <p>Lightweight kitchen view for the current sprint.</p>
</section>

<div class="admin-main">
  <% if (!orders || orders.length === 0) { %>
    <div class="admin-table-card admin-empty-state">
      <p>No orders yet. Go place one from the menu to see it here.</p>
    </div>
  <% } else { %>
    <div class="admin-table-card">
      <table class="admin-orders-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Placed At</th>
            <th>Customer</th>
            <th>Contact</th>
            <th>Type</th>
            <th>Status</th>
            <th>Update Status</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          <% orders.forEach(order => { %>
            <tr data-order-id="<%= order.id %>">
              <td class="admin-order-id">#<%= order.id %></td>
              <td class="admin-order-date">
                <span><%= new Date(order.createdAt).toLocaleString() %></span>
              </td>
              <td class="admin-customer">
                <div class="admin-customer-name"><%= order.customer.name %></div>
                <div class="admin-customer-address">
                  <% if (order.fulfillmentMethod === 'delivery') { %>
                    <strong>Delivery to:</strong> <%= order.customer.address %>
                  <% } else { %>
                    <span class="muted">Pickup</span>
                    <% if (order.customer.address) { %>
                      · <%= order.customer.address %>
                    <% } %>
                  <% } %>
                </div>
              </td>
              <td class="admin-contact">
                <div><%= order.customer.phone %></div>
                <% if (order.customer.email) { %>
                  <div class="admin-contact-email"><%= order.customer.email %></div>
                <% } %>
              </td>
              <td class="admin-fulfillment">
                <strong><%= order.fulfillmentMethod === 'delivery' ? 'Delivery' : 'Pickup' %></strong>
              </td>
              <td class="order-status-cell">
                <%= order.status %>
              </td>
              <td>
                <select class="order-status-select">
                  <% Object.values(STATUS).forEach(s => { %>
                    <option value="<%= s %>" <%= s === order.status ? 'selected' : '' %>>
                      <%= s %>
                    </option>
                  <% }); %>
                </select>
              </td>
              <td class="admin-order-total">
                <% if (order.totals && typeof order.totals.total === 'number') { %>
                  $<%= order.totals.total.toFixed(2) %>
                <% } else { %>
                  -
                <% } %>
              </td>
            </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
  <% } %>
</div>

<script src="/js/admin-orders.js"></script>
