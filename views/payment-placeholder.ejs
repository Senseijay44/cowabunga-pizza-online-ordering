<!-- Payment placeholder view: simulate a real provider before confirmation -->
<section class="page-header">
  <h1>Payment</h1>
  <p>This is a placeholder screen before handing off to a secure payment provider.</p>
</section>

<section class="confirmation-card">
  <div class="confirmation-details">
    <h2>Order Overview</h2>

    <p><strong>Order ID:</strong> <%= order.id %></p>
    <p><strong>Customer:</strong> <%= order.customer.name %></p>
    <p><strong>Phone:</strong> <%= order.customer.phone %></p>
    <p><strong>Fulfillment:</strong> <%= order.fulfillmentMethod === 'delivery' ? 'Delivery' : 'Pickup' %></p>

    <% if (order.customer.email) { %>
      <p><strong>Email:</strong> <%= order.customer.email %></p>
    <% } %>

    <% if (order.customer.address) { %>
      <p><strong>Address:</strong> <%= order.customer.address %></p>
    <% } %>

    <% if (order.items && order.items.length > 0) { %>
      <h3>Items</h3>
      <ul class="confirmation-items">
        <% order.items.forEach(item => { %>
          <li>
            <span class="item-name"><%= item.name %></span>
            <% if (item.meta) { %>
              <span class="item-meta"><%= item.meta %></span>
            <% } %>
            <span class="item-qty">x <%= item.qty %></span>
            <span class="item-price">$<%= (item.price * item.qty).toFixed(2) %></span>
          </li>
        <% }) %>
      </ul>
    <% } %>

    <% if (order.totals) { %>
      <h3>Totals</h3>
      <p>Subtotal: $<%= Number(order.totals.subtotal || 0).toFixed(2) %></p>
      <p>Tax: $<%= Number(order.totals.tax || 0).toFixed(2) %></p>
      <p><strong>Total:</strong> $<%= Number(order.totals.total || 0).toFixed(2) %></strong></p>
    <% } %>
  </div>

  <div class="confirmation-actions">
    <div class="alert alert-info">
      <p>
        In a real deployment, this step would redirect to a secure payment provider like Stripe.
        For this project, click "Complete Payment" to simulate a successful payment.
      </p>
    </div>

    <form action="/payment/<%= order.id %>/complete" method="POST" class="form">
      <button type="submit" class="btn-primary btn-full">Complete Payment</button>
    </form>
  </div>
</section>
